(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[0],{54:function(e,t,c){},65:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c(3),n=c.n(s),r=c(29),i=c.n(r),l=c(19),j=c(6),o=(c(54),c(26));c(55),c(57),c(66);o.a.apps.length||o.a.initializeApp({apiKey:"AIzaSyCQUWX7kDWfIViV6OmASNUkJfZPCw-NpnE",authDomain:"twiter-clone-24cd4.firebaseapp.com",databaseURL:"https://twiter-clone-24cd4.firebaseio.com",projectId:"twiter-clone-24cd4",storageBucket:"twiter-clone-24cd4.appspot.com",messagingSenderId:"6713186371",appId:"1:6713186371:web:ded9678050d349623e9cf6"});var b=o.a.auth(),d=o.a.firestore(),u=o.a.storage(),O=c(25),m=c(8),x=c(13),h=c.n(x),f=c(21),p=function(){var e=Object(s.useState)(""),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(""),i=Object(j.a)(r,2),l=i[0],o=i[1],d=Object(s.useState)(!0),u=Object(j.a)(d,2),O=u[0],m=u[1],x=Object(s.useState)(""),p=Object(j.a)(x,2),v=p[0],N=p[1],g=function(e){var t=e.target.name,c=e.target.value;"email"===t?n(c):"password"===t&&o(c)},w=function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!O){e.next=8;break}return e.next=5,b.createUserWithEmailAndPassword(c,l);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,b.signInWithEmailAndPassword(c,l);case 10:a=e.sent;case 11:console.log(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),N(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"auth-form",children:Object(a.jsxs)("form",{onSubmit:w,children:[Object(a.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:c,onChange:g}),Object(a.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:l,onChange:g}),Object(a.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary ",children:O?"Sign Up":"Sign In"}),v,Object(a.jsx)("button",{onClick:function(){m((function(e){return!e}))},className:"btn btn-lg btn-secondary",children:O?"Log In":"Sign Up"})]})})},v=c(41),N=c(24),g=function(){var e=function(){var e=Object(f.a)(h.a.mark((function e(t){var c,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(c=t.target.name)?a=new o.a.auth.GoogleAuthProvider:"facebook"===c&&(a=new o.a.auth.FacebookAuthProvider),e.next=4,b.signInWithPopup(a);case 4:s=e.sent,console.log(s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"auth-provider",children:[Object(a.jsxs)("button",{className:"btn btn-lg btn-outline google",name:"google",onClick:e,children:[Object(a.jsx)(v.a,{className:"social-icon"}),"Continue with Google"]}),Object(a.jsxs)("button",{className:"btn btn-lg  facebook",name:"facebook",onClick:e,children:[Object(a.jsx)(N.a,{className:"social-icon"}),"Continue with Facebook"]})]})},w=function(){return Object(a.jsxs)("div",{className:"auth",children:[Object(a.jsx)("div",{className:"auth__left",children:Object(a.jsxs)("div",{className:"texts",children:[Object(a.jsx)("p",{children:"Follow your interests."}),Object(a.jsx)("p",{children:"Hear what people are talking about."}),Object(a.jsx)("p",{children:"Join the conversation."})]})}),Object(a.jsxs)("div",{className:"auth__right",children:[Object(a.jsx)(p,{}),Object(a.jsx)(g,{})]})]})},_=c(30),k=c(28),U=c(22);function C(e,t){n.a.useEffect((function(){var c=function(c){e.current&&!e.current.contains(c.target)&&t(c)};return document.addEventListener("mousedown",c),document.addEventListener("touchstart",c),function(){document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c)}}),[e,t])}var y=Object(s.forwardRef)((function(e,t){var c=e.tweet,n=e.isCreator,r=e.deleteTweet,i=Object(s.useState)(!1),l=Object(j.a)(i,2),o=l[0],b=l[1],d=Object(s.useState)(!1),u=Object(j.a)(d,2),O=u[0],m=u[1],x=Object(s.useRef)(),h=Object(s.useRef)();return C(x,(function(){b(!1)})),C(h,(function(){m(!1)})),Object(a.jsxs)("li",{ref:t,className:"tweet",children:[Object(a.jsx)("div",{className:"col-1",children:c.user.avatar?Object(a.jsx)("img",{src:c.user.avatar,alt:"avatar",className:"avatar"}):Object(a.jsx)(k.a,{className:"avatar"})}),Object(a.jsxs)("div",{className:"col-2",children:[Object(a.jsxs)("div",{className:"tweet__header",children:[Object(a.jsx)("span",{children:c.user.userName}),Object(a.jsx)("span",{children:c.user.email?"@".concat(c.user.email):null}),n&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_.b,{className:"more",onClick:function(){return b(!0)}}),o?Object(a.jsxs)("ul",{className:"moreMenu",ref:x,children:[Object(a.jsx)("li",{className:"delete",onClick:function(){m(!0)},children:"Delete"}),Object(a.jsx)("li",{children:"Pin to your profile"}),Object(a.jsx)("li",{children:"Embed Tweet"}),Object(a.jsx)("li",{children:"View Tweet activity"}),O?Object(a.jsx)("div",{className:"modal",children:Object(a.jsxs)("div",{className:"modal-box",ref:h,children:[Object(a.jsx)("h3",{children:"Delete Tweet?"}),Object(a.jsx)("p",{children:"This can't be undone and it will be"}),Object(a.jsx)("p",{children:"removed from your profile, the timeline"}),Object(a.jsx)("p",{children:"of any accounts that follow you, and"}),Object(a.jsx)("p",{children:"from Twitter search results."}),Object(a.jsxs)("form",{children:[Object(a.jsx)("button",{className:"btn btn-md cancel",onClick:function(){return m(!1)},children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-md delete",onClick:function(){return r(c.id,c.imgUrl)},children:"Delete"})]})]})}):null]}):null]})]}),Object(a.jsx)("div",{className:"tweet__text",children:c.text}),Object(a.jsx)("div",{className:"tweet__file",children:c.imgUrl&&Object(a.jsx)("img",{src:c.imgUrl,alt:"img"})}),Object(a.jsxs)("div",{className:"tweet__footer",children:[Object(a.jsx)("span",{children:Object(a.jsx)(N.b,{})}),Object(a.jsx)("span",{children:Object(a.jsx)(U.d,{})}),Object(a.jsx)("span",{children:Object(a.jsx)(U.c,{})}),Object(a.jsx)("span",{children:Object(a.jsx)(_.c,{})})]})]})]})})),S=function(e,t,c){var a=Object(s.useState)(c?"":e.avatar),n=Object(j.a)(a,2),r=n[0],i=n[1];return Object(s.useEffect)((function(){if(t){var a="".concat(e.email,"/").concat(c?"images upload":"avatar","/ ").concat(t.name),s=u.ref(a);s.put(t).on("state_change",null,null,Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getDownloadURL();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)}))))}}),[t,e]),[r,i]},E=c(31),I=c(34),L=function(e){var t=e.currentUser,c=e.addTweet,n=Object(s.useState)(""),r=Object(j.a)(n,2),i=r[0],l=r[1],o=Object(s.useState)(null),b=Object(j.a)(o,2),d=b[0],O=b[1],m=S(t,d,"imgUpload"),x=Object(j.a)(m,2),h=x[0],f=x[1];return Object(a.jsxs)("div",{className:"newTweet",children:[Object(a.jsx)("div",{className:"col-1",children:t&&t.avatar?Object(a.jsx)("img",{src:t.avatar,alt:"user-img",className:"avatar"}):Object(a.jsx)(k.a,{className:"avatar"})}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(i||h)&&(c(i,h),O(null),f(""),l(""))},className:"col-2",children:[Object(a.jsx)("input",{type:"text",className:"newTweet__input",value:i,onChange:function(e){l(e.target.value)},placeholder:"What's happening ?"}),d&&Object(a.jsxs)("div",{className:"newTweet__file-preview",children:[Object(a.jsx)("img",{src:h,alt:"img"}),Object(a.jsx)("button",{className:"btn btn-sm btn-primary clear-btn",onClick:function(){O(null),f(""),u.refFromURL(h).delete()},children:"x"})]}),Object(a.jsxs)("div",{className:"newTweet__footer",children:[Object(a.jsxs)("label",{htmlFor:"file-input",children:[Object(a.jsx)(E.c,{}),Object(a.jsx)("input",{id:"file-input",type:"file",accept:"image/*",onChange:function(e){O(e.target.files[0])}})]}),Object(a.jsx)(I.a,{}),Object(a.jsx)(I.b,{}),Object(a.jsx)("button",{type:"submit",className:"btn btn-md btn-primary tweet-btn",children:"Tweet"})]})]})]})},T=function(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),c=t[0],a=t[1];return Object(s.useEffect)((function(){var e=d.collection("tweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id})}));a(t)}));return function(){return e()}}),[]),c},F=c(42),R=function(e){var t=e.currentUser,c=T(),s=function(e,t){d.collection("tweets").doc(e).delete(),t&&u.refFromURL(t).delete()};return Object(a.jsxs)("div",{className:"feed",children:[Object(a.jsx)("div",{className:"feed__header",children:Object(a.jsx)("h3",{children:"Home"})}),Object(a.jsx)(L,{currentUser:t,addTweet:function(e,c){d.collection("tweets").add({text:e,imgUrl:c,user:{avatar:t.avatar,userName:t.userName,email:t.email},createdAt:Date.now(),creatorId:t.uid})}}),Object(a.jsx)("ul",{children:Object(a.jsx)(F.a,{leaveAnimation:"none",children:c.map((function(e){return Object(a.jsx)(y,{tweet:e,isCreator:e.creatorId===t.uid,deleteTweet:s},e.id)}))})})]})},A=c(43),P=c(44),D=function(e){var t=e.currentUser,c=e.setIsEditBtnClick,n=Object(s.useRef)();return Object(a.jsxs)("div",{className:"profileHeader",children:[Object(a.jsx)("div",{className:"profileHeader__bg",children:Object(a.jsx)("div",{className:"default-bg"})}),Object(a.jsxs)("div",{className:"profileHeader__edit-profile",children:[Object(a.jsx)("div",{className:"profile-img",children:t.avatar?Object(a.jsx)("img",{src:t.avatar,alt:"profile"}):Object(a.jsx)("div",{className:"default-img"})}),Object(a.jsx)("button",{ref:n,className:"btn btn-md btn-secondary edit-btn",onClick:function(){c(!0)},children:"Edit profile"})]}),Object(a.jsx)("div",{className:"profileHeader__username",children:t.userName?t.userName:t.email}),Object(a.jsxs)("div",{className:" profileHeader__bio",children:[t.bio?t.bio:null," no bio"]}),Object(a.jsxs)("div",{className:"profileHeader__other-info",children:[Object(a.jsx)(A.a,{})," Dublin",Object(a.jsx)(P.a,{className:"calendar"})," Joined August 2018"]}),Object(a.jsx)("nav",{className:"profileHeader__nav",children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)("span",{children:"Tweets"})}),Object(a.jsx)("li",{children:Object(a.jsx)("span",{children:"Tweets & replies"})}),Object(a.jsx)("li",{children:Object(a.jsx)("span",{children:"Media"})}),Object(a.jsx)("li",{children:Object(a.jsx)("span",{children:"Likes"})})]})})]})},H=function(e){var t=e.currentUser,c=e.refreshCurrentUser,n=e.setIsEditBtnClick,r=Object(s.useState)(t.userName||""),i=Object(j.a)(r,2),o=i[0],u=i[1],O=Object(s.useState)(null),m=Object(j.a)(O,2),x=m[0],p=m[1],v=S(t,x),N=Object(j.a)(v,1)[0],g=Object(s.useRef)(),w=function(){var e=Object(f.a)(h.a.mark((function e(a){var s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),o===t.userName&&N===t.avatar){e.next=10;break}return e.next=4,t.updateProfile({displayName:o,photoURL:N});case 4:return c(),e.next=7,d.collection("tweets").where("creatorId","==",t.uid).get();case 7:s=e.sent,s.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id})})).forEach((function(e){d.collection("tweets").doc(e.id).update({user:{avatar:b.currentUser.photoURL,userName:b.currentUser.displayName}})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return C(g,(function(){n(!1)})),Object(a.jsx)("div",{className:"edit-modal",children:Object(a.jsxs)("form",{ref:g,onSubmit:w,className:"edit-modal-form",children:[Object(a.jsxs)("div",{className:"edit-modal-form__row-1",children:[Object(a.jsx)(U.b,{className:"close",onClick:function(){return n(!1)}}),Object(a.jsx)("h3",{children:"Edit profile"}),Object(a.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary save-btn",onClick:w,children:"Save"})]}),Object(a.jsx)("div",{className:"edit-modal-form__row-2",children:Object(a.jsxs)("label",{htmlFor:"bg-img",children:[Object(a.jsx)(U.a,{className:"camera"}),Object(a.jsx)(U.b,{className:"close"}),Object(a.jsx)("input",{type:"file",accept:"image/*",id:"bg-img",className:"bg-img"})]})}),Object(a.jsx)("div",{className:"edit-modal-form__row-3",children:Object(a.jsxs)("div",{className:"profile-img",children:[N&&Object(a.jsx)("img",{src:N,alt:"avatar"}),Object(a.jsxs)("label",{htmlFor:"file-input",children:[Object(a.jsx)(U.a,{className:"camera"}),Object(a.jsx)("input",{id:"file-input",type:"file",accept:"image/*",onChange:function(e){p(e.target.files[0])}})]})]})}),Object(a.jsxs)("div",{className:"edit-modal-form__row-4",children:[Object(a.jsx)("label",{htmlFor:"name",children:"Name"}),Object(a.jsx)("input",{type:"text",id:"name",className:"input",value:o,onChange:function(e){u(e.target.value)}})]}),Object(a.jsxs)("div",{className:"edit-modal-form__row-5",children:[Object(a.jsx)("label",{htmlFor:"bio",children:"Bio"}),Object(a.jsx)("textarea",{type:"text",id:"name",className:"input"})]}),Object(a.jsxs)("div",{className:"edit-modal-form__row-6",children:[Object(a.jsx)("label",{htmlFor:"location",children:"Location"}),Object(a.jsx)("input",{type:"text",id:"location",className:"input"})]})]})})},B=function(e){var t=e.currentUser,c=e.refreshCurrentUser,n=Object(s.useState)(!1),r=Object(j.a)(n,2),i=r[0],l=r[1];return Object(a.jsxs)("div",{className:"profile",children:[Object(a.jsx)(D,{currentUser:t,setIsEditBtnClick:l}),i?Object(a.jsx)(H,{currentUser:t,refreshCurrentUser:c,setIsEditBtnClick:l}):null]})},J=c(39),W=c(46),M=c(47),z=c(48),V=function(){var e=Object(s.useState)(!1),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(m.f)(),i=Object(s.useRef)();return C(i,(function(){n(!1)})),Object(a.jsxs)("nav",{className:"sidebar",children:[Object(a.jsx)(O.b,{to:"/",className:"twitter-icon",children:Object(a.jsx)(N.c,{})}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsxs)(O.b,{to:"/",children:[Object(a.jsx)(J.b,{}),Object(a.jsx)("span",{children:" Home "})]})}),Object(a.jsxs)("li",{children:[Object(a.jsx)(_.a,{}),Object(a.jsx)("span",{children:" Explore "})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(W.a,{}),Object(a.jsx)("span",{children:" Notification"})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(E.b,{}),Object(a.jsx)("span",{children:" Message"})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(E.a,{}),Object(a.jsx)("span",{children:" Bookmarks "})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(J.a,{}),Object(a.jsx)("span",{children:" Lists "})]}),Object(a.jsx)("li",{children:Object(a.jsxs)(O.b,{to:"/profile",children:[Object(a.jsx)(N.d,{}),Object(a.jsx)("span",{children:"Profile"})]})}),Object(a.jsxs)("li",{children:[Object(a.jsx)(M.a,{}),Object(a.jsx)("span",{children:" More"})]}),Object(a.jsxs)("li",{ref:i,onClick:function(){n(!c)},children:[Object(a.jsx)(k.a,{}),Object(a.jsx)("span",{children:" Jinyoung Jeong"}),Object(a.jsx)("span",{children:Object(a.jsx)(z.a,{})})]}),c?Object(a.jsx)("button",{className:"btn btn-md btn-danger logout",onClick:function(){b.signOut(),r.push("/")},children:"Log out"}):null]})]})},q=c(32),G=function(){return Object(a.jsxs)("div",{className:"widget",children:[Object(a.jsx)(q.b,{tweetId:"1175348725725761537"}),Object(a.jsx)(q.c,{id:"1325112938626228226"}),Object(a.jsx)(q.b,{tweetId:"1292440518186749953"}),Object(a.jsx)(q.a,{url:"https://facebook.com/saurabhnemade",options:{text:"#reactjs is awesome",via:"saurabhnemade"}})]})},K=function(e){var t=e.isLoggedIn,c=e.currentUser,s=e.refreshCurrentUser;return Object(a.jsx)(O.a,{children:Object(a.jsx)(m.c,{children:Object(a.jsx)(a.Fragment,{children:t?Object(a.jsxs)("div",{className:"main",children:[Object(a.jsx)(V,{}),Object(a.jsx)(m.a,{exact:!0,path:"/",component:function(){return Object(a.jsx)(R,{currentUser:c})}}),Object(a.jsx)(m.a,{exact:!0,path:"/profile",component:function(){return Object(a.jsx)(B,{currentUser:c,refreshCurrentUser:s})}}),Object(a.jsx)(G,{})]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(m.a,{exact:!0,path:"/",component:w})})})})})};var Q=function(){var e=Object(s.useState)(!1),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(!1),i=Object(j.a)(r,2),o=i[0],d=i[1],u=Object(s.useState)(null),O=Object(j.a)(u,2),m=O[0],x=O[1];return Object(s.useEffect)((function(){b.onAuthStateChanged((function(e){e?(d(!0),x({userName:e.displayName,email:e.email,avatar:e.photoURL,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})):d(!1),n(!0)}))}),[]),Object(a.jsx)("div",{className:"App",children:c?Object(a.jsx)(K,{isLoggedIn:o,currentUser:m,refreshCurrentUser:function(){x(Object(l.a)(Object(l.a)({},m),{},{userName:b.currentUser.displayName,avatar:b.currentUser.photoURL}))}}):Object(a.jsx)("h3",{className:"init-message",children:"initializing.."})})};i.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(Q,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.b39e9f96.chunk.js.map